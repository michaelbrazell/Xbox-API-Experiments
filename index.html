<html>
<head>
    <title>Screenshots!</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <style>
    .jumbotron { margin-top: 70px; }
    </style>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Xbox Live API Experiments</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#">Home</a></li>
            <li class="active"><a href="#screenshots">Screenshots</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
<div class="container">

    <!-- Jumbotron -->
    <div class="jumbotron">
        <h1>Screenshots</h1>
        <p class="lead">This page is looping through available screenshots for the XBL username <em>michaelbrazell</em>.  The functionality to pull by username doesn't work, so this button here does nothing.</p>
        <p><a class="btn btn-lg btn-success" href="#" role="button">Enter new XBL username</a></p>
    </div>
    <div class="row">
        <div id="screenshots"></div>
    </div>
    <hr>
    <div class="row">
        <p id="contact">This is a project by <a href="mailto:michaelbrazell@gmail.com">Mike Murray</a>.  Feel free to fork on <a href="https://github.com/michaelbrazell/www.xboxlive.dev">GitHub</a> or contact me on <a href="http://www.twitter.com/michaelbrazell">Twitter</a>.
    </div>
    <footer class="footer">
        <p>&copy; <a href="http://michaelbrazell.github.com" target="_blank">Mike Murray</a>, 2015</p>
      </footer>
</div>
</body>
<script type="text/javascript">
var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        if(xhr.status === 200) {
            responseObject = JSON.parse(xhr.responseText);

            // Build up strings
            var newContent='';
            for (var i = 0; i < responseObject.length; i++) { // Loop through items
                newContent += '<div class="col-xs-12 col-sm-4">';
                // Check to see whether screenshotUris exists in json file for each item
                if ( responseObject[i].hasOwnProperty('screenshotUris')) {
                    // Check to see whether screenshotUris has the uri key for each item
                    if ( responseObject[i].screenshotUris[0].hasOwnProperty('uri')) { 
                        // build list item with game date, screenshot, and download button
                        newContent += '<div class="thumbnail"><img src="' + responseObject[i].screenshotUris[0].uri.split('?')[0] + '"><div class="caption"><h3>' + i + '. ' + responseObject[i].titleName +  '</h3><p>Date Taken: ' + responseObject[i].dateTaken +'<br>Size: ' + responseObject[i].screenshotUris[0].fileSize + ' bytes</p><p><a class="btn btn-primary" role="button" href="' + responseObject[i].screenshotUris[0].uri.split('?')[0] + '">Download</a> <a href="' + responseObject[i].screenshotUris[0].uri.split('?')[0] + '" class="dropbox-saver">Save</a><p></div></div>';
                    } else {
                        // If no uri key
                        newContent += '<div class="item">No URI for screenshotUris</div>';
                    }
                } else { 
                    // if no screenshotUri
                    newContent += '<div class="item">No ScreenshotURI Property</div>'; 
                }
                newContent += '</div>';
            }
            // Update page
            document.getElementById('screenshots').innerHTML = newContent;
        }
    };
    xhr.open('GET', 'data/data.json', true);
    xhr.send(null);
</script>
<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="sxy8oe71pk1gqkd"></script>
</html>